<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="description" content="Personal website and blog of Samrat Man Singh. Follow him at @samratmansingh" />
  <meta name="keywords" content="Samrat Man Singh, python, flask, computers, technology, nepal" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Samrat Man Singh - Articles by Samrat Man Singh</title>
  <!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <link rel="stylesheet" href="http://samrat.me/theme/css/styles.min.css" type="text/css" media="screen, projection">
  <link rel="stylesheet" href="http://samrat.me/theme/css/pygments.css" type="text/css" media="screen">


  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/SamratDotMe" />
  
</head>

<body>
<header class="main-header">
  <hgroup>
    <div class="picture">
      <a href="http://samrat.me" rel="home"></a>
    </div>
    <h1>Samrat Man Singh</h1>
    <h2>18 year-old from Nepal interested in computers and technology.</h2>
  </hgroup>
  <nav>
    <ul class="main-nav">
      <li><a href="http://samrat.me" id="home-link">Home</a></li>
	  
		<li><a href="http://twitter.com/samratmansingh" id="twitter-link">Twitter</a></li>
	  
		<li><a href="http://github.com/samrat" id="twitter-link">Github</a></li>
	  
	  <li><a href="http://feeds.feedburner.com/SamratDotMe" id="github-link">Feed</a></li>
      <li><a href="mailto:samratmansingh@gmail.com?subject=Hello" id="contact-link">Contact</a></li>
  </nav>
  <a href="http://pelican.notmyidea.org" class="fork-me">Powered by Pelican.</a>

</header>

<section class="main-section blog-section" id="blog-posts">
  
  <h3 class="date">May 27, 2012</h3>
    <article>
	<hgroup>
	<h2><a href="blog/2012/05/flask-nginx-gunicornon-a-vagrant-box" title="Permalink to Flask + Nginx + Gunicorn(on a Vagrant box)">Flask + Nginx + Gunicorn(on a Vagrant box)</a></h2>
	
	</hgroup>
	<p><strong>Update-</strong> <em>Since I(and many others on Hacker News) felt that I missed up on an important tool closely related to, and tightly embraced by Vagrant, I've written a follow-up to this post which covers Puppet- you can <a href="http://samrat.github.com/blog/2012/06/a-first-look-at-provisioning-with-puppeton-a-vagrant-box.html">find it here</a>.</em></p>
<p>I had some difficulty in grasping how exactly to set up a server when I tried to do so recently, so I decided to write a tutorial that will guide you through the process. Hopefully, this post will help you avoid at least some of the confusion that I encountered.</p>
<p>We'll be using Nginx + Gunicorn to host a simple Flask app. Many of you may not have access to a server but don't worry, we'll use <a href="http://vagrantup.com">Vagrant</a>, which makes use of a VirtualBox VM to emulate a server. </p>
<h2>The Flask App</h2>
<p>Because this is a post about deployment more than development, we'll make the web app super-simple. If you're not familiar with Flask, please <a href="http://flask.pocoo.org/">check it out</a>, its awesome and really easy to learn. You'll also probably want to develop the app inside <a href="http://pypi.python.org/pypi/virtualenv">virtualenv</a>- it makes things a lot neater. Make a folder in your local machine(we're not working with the virtual-machine yet) for your app, I'll call it <code>codebase</code>. Create two folders called <code>static</code> and <code>templates</code>, and a Python file called <code>app.py</code>. <code>codebase</code> should now look like this:</p>
<div class="codehilite"><pre><span class="p">.</span>
├── <span class="n">app</span><span class="p">.</span><span class="n">py</span>
├── <span class="n">static</span>
└── <span class="n">templates</span>
</pre></div>


<p>Now, open app.py with a text editor and add the following:</p>
<div class="codehilite"><pre><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s">&quot;Hello world!&quot;</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>


<p>At this point, if you run <code>app.py</code> with <code>python app.py</code>, you should be able to open http://localhost:5000/ and see a "Hello World!" printed. Now, freeze your requirements with </p>
<div class="codehilite"><pre><span class="n">pip</span> <span class="n">freeze</span> <span class="o">&gt;</span> <span class="n">requirements</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<p>Great, now we'll start working on the actual server. </p>
<h2>Vagrant</h2>
<p>As I said before, Vagrant allows you to work with server-like environments on your local machine. It's absolutely great. To get <a href="http://vagrantup.com">Vagrant</a> up and running:</p>
<div class="codehilite"><pre><span class="c"># first install Virtualbox, then,</span>
<span class="n">gem</span> <span class="n">install</span> <span class="n">vagrant</span>
<span class="n">vagrant</span> <span class="nb">box</span> <span class="n">add</span> <span class="n">base</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">files</span><span class="p">.</span><span class="n">vagrantup</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">precise32</span><span class="p">.</span><span class="nb">box</span>
<span class="n">vagrant</span> <span class="n">init</span>
<span class="n">vagrant</span> <span class="n">up</span>
</pre></div>


<p>If nothing went wrong, you should now see a file called <code>Vagrantfile</code> inside <code>codebase</code>- that's Vagrant's configuration file. Open the file, we'll need to make a few changes to the file.</p>
<p>First, uncomment the line:</p>
<div class="codehilite"><pre><span class="n">config</span><span class="p">.</span><span class="n">vm</span><span class="p">.</span><span class="n">network</span> <span class="p">:</span><span class="n">hostonly</span><span class="p">,</span> &quot;192<span class="p">.</span>168<span class="p">.</span>33<span class="p">.</span>10&quot;
</pre></div>


<p>and change "192.168.33.10" to "33.33.33.33". This will enable the host-machine(that is your computer) to access the webserver running on the VM.</p>
<p>That way we should be able to access a web app running in the VM's <code>localhost</code>, on our machine. </p>
<p>Because, we did a <code>vagrant up</code> the Vagrant box should already be running. Now, run </p>
<div class="codehilite"><pre><span class="n">vagrant</span> <span class="n">reload</span>
</pre></div>


<p>so that the changes we made to the Vagrantfile take place.</p>
<p>After the VM restarts, run</p>
<div class="codehilite"><pre><span class="n">vagrant</span> <span class="n">ssh</span>
</pre></div>


<p>This allows you to run commands into the VM. Once inside the VM, we'll need to get some things installed. Run </p>
<div class="codehilite"><pre><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">nginx</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">virtualenv</span>
</pre></div>


<p>Now let's create a folder inside the VM where we'll keep the application</p>
<div class="codehilite"><pre><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">vagrant</span>
<span class="n">mkdir</span> <span class="n">www</span>
<span class="n">cd</span> <span class="n">www</span>
<span class="n">virtualenv</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span> <span class="p">.</span>
<span class="n">mkdir</span> <span class="n">codebase</span>
</pre></div>


<p>And let's grab the application from our local machine</p>
<div class="codehilite"><pre><span class="n">cp</span> <span class="o">/</span><span class="n">vagrant</span><span class="o">/*</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">vagrant</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">codebase</span><span class="o">/</span>
</pre></div>


<p><em>Note that while I used <code>cp</code>, its always a better idea to use <code>git</code> or some other version-control system. For more on that, I recommend that you read <a href="http://thomas.pelletier.im/2011/04/git-django-deployment/">this post</a>.</em></p>
<p>Then, activate the virtualenv we created.</p>
<div class="codehilite"><pre><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">vagrant</span><span class="o">/</span><span class="n">www</span>
<span class="n">source</span> <span class="n">bin</span><span class="o">/</span><span class="n">activate</span>
</pre></div>


<p>Install gunicorn with <code>pip</code></p>
<div class="codehilite"><pre><span class="n">pip</span> <span class="n">install</span> <span class="n">gunicorn</span>
</pre></div>


<p>Also install the other Python dependencies your app has with</p>
<div class="codehilite"><pre><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<p>That will grab and install your app's required dependencies like Flask. </p>
<p>Now, if you run </p>
<div class="codehilite"><pre><span class="n">gunicorn</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">vagrant</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">codebase</span><span class="o">/</span><span class="n">app</span><span class="p">.</span><span class="n">py</span><span class="p">:</span><span class="n">app</span> <span class="o">-</span><span class="n">b</span> 127<span class="p">.</span>0<span class="p">.</span>0<span class="p">.</span>1<span class="p">:</span>8000
</pre></div>


<p>you'll have your app running but if you try opening it from your browser you'll find that you can't actually see the "Hello World" message that we were expecting. That's where nginx comes in.</p>
<h2>Nginx</h2>
<p>First of all, you need to start nginx with</p>
<div class="codehilite"><pre><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">init</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">nginx</span> <span class="n">start</span>
</pre></div>


<p>Then </p>
<div class="codehilite"><pre><span class="n">rm</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">sites</span><span class="o">-</span><span class="n">enabled</span><span class="o">/</span><span class="n">default</span>
<span class="n">touch</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">sites</span><span class="o">-</span><span class="n">available</span><span class="o">/</span><span class="n">codebase</span>
<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">sites</span><span class="o">-</span><span class="n">available</span><span class="o">/</span><span class="n">codebase</span>  <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">sites</span><span class="o">-</span><span class="n">enabled</span><span class="o">/</span><span class="n">codebase</span>
</pre></div>


<p>To <code>/etc/nginx/sites-enabled/codebase</code> add</p>
<div class="codehilite"><pre><span class="n">server</span> <span class="p">{</span>
    <span class="n">location</span> <span class="o">/</span> <span class="p">{</span>
        <span class="n">proxy_pass</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span>127<span class="p">.</span>0<span class="p">.</span>0<span class="p">.</span>1<span class="p">:</span>8000<span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>And restart nginx with </p>
<div class="codehilite"><pre><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">init</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">nginx</span> <span class="n">restart</span>
</pre></div>


<p>Now, from inside <code>codebase</code> run</p>
<div class="codehilite"><pre><span class="n">gunicorn</span> <span class="n">app</span><span class="p">:</span><span class="n">app</span> <span class="o">-</span><span class="n">b</span> <span class="n">localhost</span><span class="p">:</span>8000
</pre></div>


<p>If everything went right, if you visit <a href="http://33.33.33.33/">http://33.33.33.33/</a> you should now see the "Hello World!" message. Congratulations! You've successfully set up your own server.</p>
	</article>

  <h3 class="date">June 28, 2012</h3>
    <article>
	<hgroup>
	<h2><a href="blog/2012/06/googles-answer-to-siri-now" title="Permalink to Google's answer to Siri: Now">Google's answer to Siri: Now</a></h2>
	
	</hgroup>
	<p>If you've been following the tech world recently you'd know that Apple and Google haven't been the best of friends lately. You know, because Google ripped off Apple the same way Microsoft had ripped them off back when the PC boom was kicking off. There's a statement by Steve Jobs in his biography which can only be regarded as a declaration of war on Google. And we are starting to actually see this war taking place- a few weeks ago, Apple declared that the new iOS will come with its own 'Google Maps'-like service instead of Google Maps.</p>
<p>And now, Google too has announced its answer to what was iOS 5's most famous addition- Siri. It's not exactly like Siri- in fact, Google has tried to go a step further and make a more smarter system. If Google succeeds in rolling out Project Glass then Google Now will be a pretty nifty feature for it too. Watch the video below to find out what Now is all about:</p>
<iframe width="560" height="315" src="http://www.youtube.com/embed/pPqliPzHYyc" frameborder="0" allowfullscreen></iframe>
	</article>

  <h3 class="date">July 07, 2012</h3>
    <article>
	<hgroup>
	<h2><a href="blog/2012/07/help-me-buy-a-domain-name" title="Permalink to Help me buy a domain name">Help me buy a domain name</a></h2>
	
	</hgroup>
	<p><strong>UPDATE- <a href="http://news.ycombinator.com/user?id=Udo">Udo</a> on Hacker News was kind enough to buy me a domain. This site can now be reached at <a href="http://samrat.me">http://samrat.me</a>. Thanks a lot, Udo.</strong></p>
<p>I've got a problem. I want to buy a domain name for this website. But due to some banking regulations in my country, online payments cannot be made(for international transactions, at least.) Some companies <em>are</em> making money by buying products on Amazon and other online shops on behalf of people here, but they're limited to only physical goods. </p>
<p>This problem has been troubling me for a while, and I've come up with what could be a solution. Following all the recent buzz around Kickstarter- I decided to ask the Internet for help, but don't worry, <strong>I'm not asking for your money</strong>. </p>
<p>If you're still reading this and interested in helping <em>and if you happen to be a person who is about to buy a domain name</em>, you can support my cause by buying a domain name with my <a href="http://www.namecheap.com?aff=34707">affiliate link</a> on Namecheap. That way, a small percentage of what you spend on Namecheap might help me get a domain name for myself. But if you're not interested, no pressure, I can live without a domain name; just please don't take this the wrong way.</p>
<p>If you're interested in helping but not looking to register a domain name right now, you could bookmark the link above and use that to make your purchase later. As you can probably tell, I haven't used Namecheap but I've heard they're great!</p>
<p>Thank you :)</p>
	</article>

  <h3 class="date">May 03, 2012</h3>
    <article>
	<hgroup>
	<h2><a href="blog/2012/05/how-to-convert-a-bookmarklet-into-a-chrome-extension" title="Permalink to How to convert a bookmarklet into a Chrome extension">How to convert a bookmarklet into a Chrome extension</a></h2>
	
	</hgroup>
	<p>I've been playing around with CoffeeScript lately and discovered a neat little tool that converts any JavaScript(and thus, Coffeescript) bookmarklet into a Chrome extension- <a href="http://sandbox.self.li/bookmarklet-to-extension/">check it out</a>.</p>
	</article>

  <h3 class="date">August 30, 2011</h3>
    <article>
	<hgroup>
	<h2><a href="blog/2011/08/innovating-in-a-developing-nation" title="Permalink to Innovating in a developing nation">Innovating in a developing nation</a></h2>
	
	</hgroup>
	<p>Innovation is really hard to find in a developing nation. Innovation requires taking risks because when you’re innovating you are, by definition, doing things in a way that is unconventional. And taking risks in a developing nation is hard. Firstly because in a developing country the people’s first priority is to achieve financial security. Thus, many end up getting a safe job with a large corporation than risking their money by starting an enterprise. However, although that may lead to a secure future, it definitely doesn’t lead to prosperity, both for the individual and the nation. </p>
<p>So, how can a developing nation cultivate a culture of innovation? Now, I know that a lot of people will say that the government should improve its policies to become more entrepreneur-friendly. Yes, in most developing nations governmental policies and governments can become huge setbacks to entrepreneurship; in fact, that’s probably the reason why they are developing nations in the first place. But what we must realize is that governmental policies are unlikely to change anytime soon. So whatever can be done has to be from our side. </p>
<p>The answer, in my opinion, to improve the startup scene in any nation is to <em>start small</em>. Entrepreneurs and innovators need to learn how to start small and make the best of the resources they have available. This is actually quite easy for web startups these days, as so much software is available for free online. Also, services like Amazon EC2 make it extremely cheap to create websites that can scale in response to the popularity it gains. </p>
<p><em>Bootstrapping</em> is a word that has caught on a lot recently, and not without good reason. Traditionally, the way to start a business was to raise a lot of capital and then start making and selling your stuff. Bootstrapping, on the other hand, means starting with very little cash and then turning those small investments into a profit. That’s the way a lot of today’s big companies like Apple, Google and Facebook did it. (Of course, they all raised money later from investors so that they could grow even larger.) </p>
<p>However, the most important part of innovating or starting a business is <em>solving problems</em>- actual problems. A lot of web startups these days solve what have properly been coined the name first world problems and they aren’t really problems, at least not compared to the third world problems. Now, if you want your creation to survive in a poor developing nation, then your creation better be good. One good example of a company solving an actual problem is <a href="http://harilo.com" title="Harilo">Harilo</a>. People in Nepal can’t order from stores like Amazon.com so the guys at Harilo created a service which allowed them to. It may not be a totally new idea(I’ve seen another Indian website offering a similar service) but its opened up a whole new world of online shopping in Nepal. </p>
<p>Innovation is something citizens of developing nations must indulge in- it’s the only way we’ll be able to move forward. We are already part of the wonderful world the Internet has made possible and now is the best time to join the league of people whose beautiful creations shape this world. </p>
	</article>



<p class="paginator">
	
		
			<a href="http://samrat.me/author/Samrat Man Singh.html" class="button_accent">&larr;&nbsp;&nbsp;&nbsp;newer</a>
		
	
	
		<a href="http://samrat.me/author/Samrat Man Singh3.html" class="button_accent" style="float:right;">continue&nbsp;&nbsp;&nbsp;&rarr;</a>
	
</p>


</section>

<div class="mobile-nav">
  <span class="nav-btn" id="mobile-nav-btn">
    <span class="nav-btn-bar"></span>
    <span class="nav-btn-bar"></span>
    <span class="nav-btn-bar"></span>
  </span>
  <h3><a href="/">samrat.me</a></h3>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
/*<![CDATA[*/
var twitter_integration_enabled = true,
    github_integration_enabled = true,
    dribbble_integration_enabled = false,
    instagram_integration_enabled = true;
/*]]>*/
</script>

<script src="http://samrat.me/theme/js/min/scripts.min.js"></script>


    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-18986645-3']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>

</body>