<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="description" content="Personal website and blog of Samrat Man Singh. Follow him at @samratmansing" />
  <meta name="keywords" content="Samrat Man Singh, python, flask, computers, technology, nepal" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Samrat Man Singh - Articles by Samrat Man Singh</title>
  <!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <link rel="stylesheet" href="http://samrat.me/theme/css/styles.min.css" type="text/css" media="screen, projection">

  <link rel="alternate" type="application/rss+xml" title="RSS"
  href="http://feeds.feedburner.com/SamratDotMe" />
  
</head>

<body>
<header class="main-header">
  <hgroup>
    <div class="picture">
      <a href="http://samrat.me" rel="home"></a>
    </div>
    <h1>Samrat Man Singh</h1>
    <h2>18 year-old from Nepal interested in computers and technology</h2>
  </hgroup>
  <nav>
    <ul class="main-nav">
      <li><a href="http://samrat.me" id="home-link">Home</a></li>
	  
		<li><a href="/projects" id="twitter-link">Projects</a></li>
	  
		<li><a href="http://twitter.com/samratmansingh" id="twitter-link">Twitter</a></li>
	  
		<li><a href="http://github.com/samrat" id="twitter-link">Github</a></li>
	  
		<li><a href="mailto:samrat@samrat.me" id="twitter-link">Contact</a></li>
	  
	  <li><a href="http://feeds.feedburner.com/SamratDotMe" id="github-link">Feed</a></li>
      
  </nav>
  <a href="http://pelican.notmyidea.org" class="fork-me">Powered by Pelican.</a>

</header>

<section class="main-section blog-section" id="blog-posts">
  
  <h3 class="date">June 04, 2012</h3>
    <article>
	<hgroup>
	<h2><a href="blog/2012/06/a-first-look-at-provisioning-with-puppeton-a-vagrant-box" title="Permalink to A first look at provisioning with Puppet(on a Vagrant box)">A first look at provisioning with Puppet(on a Vagrant box)</a></h2>
	
	</hgroup>
	<p>In my <a href="http://samrat.github.com/blog/2012/05/flask-nginx-gunicornon-a-vagrant-box/">previous post</a>, I talked about deploying a Flask app on a Vagrant box using Gunicorn and Nginx. The response I got was mind-blowing, so I've decided to write about another neat tool that's awesome for deploying web apps- Puppet. <a href="http://vagrantup.com">Vagrant</a> actually encourages its users to use it, and you should use it. <strong>There's also an alternative to Puppet called <a href="http://www.opscode.com/chef/">Chef</a>; some people prefer that over Puppet, so you might want to check it out.</strong></p>
<p>Hopefully I'll be able to demonstrate what Puppet does and why its awesome in this post. But please note that this isn't meant as a comprehensive tutorial, you should check out Puppet's <a href="http://docs.puppetlabs.com/">docs</a> for that. Also even though the Puppet docs asks you to get the Learning Puppet VM, I found it much more comfortable to use <code>vagrant ssh</code> for learning Puppet, so if you already have Vagraant installed, you might want to try that out too- just try running <code>puppet</code> inside the virtual machine. </p>
<p>What Puppet does is something called <em>provisioning</em>- that means that it <em><a href="http://www.youtube.com/watch?v=bP8Mtiuc8XM">makes computers do what they are supposed to do</a></em>. In other words, it does the configuring for you. To understand what that means, let's see it in action.</p>
<p>First create a Vagrant box, </p>
<div class="codehilite"><pre><span class="n">mkdir</span> <span class="n">codebase_with_puppet</span>
<span class="n">cd</span> <span class="n">codebase_with_puppet</span>

<span class="n">vagrant</span> <span class="n">init</span>
</pre></div>


<p>You should now see Vagrantfile. Open it with a text editor, then uncomment the lines</p>
<div class="codehilite"><pre><span class="n">config</span><span class="p">.</span><span class="n">vm</span><span class="p">.</span><span class="n">provision</span> <span class="p">:</span><span class="n">puppet</span> <span class="n">do</span> <span class="o">|</span><span class="n">puppet</span><span class="o">|</span>
    <span class="n">puppet</span><span class="p">.</span><span class="n">manifests_path</span> <span class="p">=</span> &quot;<span class="n">manifests</span>&quot;
    <span class="n">puppet</span><span class="p">.</span><span class="n">manifest_file</span>  <span class="p">=</span> &quot;<span class="n">base</span><span class="p">.</span><span class="n">pp</span>&quot;
<span class="k">end</span>
</pre></div>


<p>Now, create <code>base.pp</code> inside a folder called manifests, and add the following to it.</p>
<div class="codehilite"><pre><span class="n">package</span> <span class="p">{</span>&quot;<span class="n">nginx</span>&quot;<span class="p">:</span>
    <span class="n">ensure</span> <span class="p">=</span><span class="o">&gt;</span> <span class="n">present</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>


<p>Now, run <code>vagrant up</code>. You'll notice that Vagrant automatically installs <code>nginx</code> after it boots the VM. You should get a message like </p>
<div class="codehilite"><pre><span class="n">notice</span><span class="p">:</span> <span class="o">/</span><span class="n">Stage</span><span class="p">[</span><span class="n">main</span><span class="p">]</span><span class="o">//</span><span class="n">Package</span><span class="p">[</span><span class="n">nginx</span><span class="p">]</span><span class="o">/</span><span class="n">ensure</span><span class="p">:</span> <span class="n">ensure</span> <span class="n">changed</span> <span class="s">&#39;purged&#39;</span> <span class="n">to</span> <span class="s">&#39;present&#39;</span>
</pre></div>


<p>This can become a real treasure as this way, you won't have to memorize what you need to install, to get the app running. All the system needs is to have <code>puppet</code> installed, after that <code>puppet</code> with the right manifests will handle everything. </p>
<p>Now, let's do something different with Puppet- instead of installing another package, we'll use it to configure <code>nginx</code>. </p>
<p>First, create a file in your local machine, inside <code>codebase_with_puppet</code> called <code>codebase_nginx</code>. To that file add the following</p>
<div class="codehilite"><pre><span class="k">server</span> <span class="p">{</span>
    <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
        <span class="kn">proxy_pass</span> <span class="s">http://127.0.0.1:8000</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>If you've gone through the <a href="http://samrat.github.com/blog/2012/05/flask-nginx-gunicornon-a-vagrant-box/">previous post</a> you'll notice that it's the same configuration that we had used. </p>
<p>Now, we'll use Puppet to make sure that the configuration file is placed where its supposed to be. To your <code>base.pp</code> file, add </p>
<div class="codehilite"><pre><span class="n">file</span> <span class="p">{</span>&quot;<span class="n">rm</span><span class="o">-</span><span class="n">nginx</span><span class="o">-</span><span class="n">default</span>&quot;<span class="p">:</span>
    <span class="n">path</span> <span class="p">=</span><span class="o">&gt;</span> <span class="s">&#39;/etc/nginx/sites-enabled/default&#39;</span><span class="p">,</span>
    <span class="n">ensure</span> <span class="p">=</span><span class="o">&gt;</span> <span class="n">absent</span><span class="p">,</span>
    <span class="n">require</span> <span class="p">=</span><span class="o">&gt;</span> <span class="n">Package</span><span class="p">[</span><span class="s">&#39;nginx&#39;</span><span class="p">],</span>
<span class="p">}</span>

<span class="n">file</span> <span class="p">{</span>&quot;<span class="n">setup</span><span class="o">-</span><span class="n">nginx</span><span class="o">-</span><span class="n">codebase</span>&quot;<span class="p">:</span>
    <span class="n">path</span> <span class="p">=</span><span class="o">&gt;</span> <span class="s">&#39;/etc/nginx/sites-enabled/codebase_nginx&#39;</span><span class="p">,</span>
    <span class="n">ensure</span> <span class="p">=</span><span class="o">&gt;</span> <span class="n">present</span><span class="p">,</span>
    <span class="n">require</span> <span class="p">=</span><span class="o">&gt;</span> <span class="n">Package</span><span class="p">[</span><span class="s">&#39;nginx&#39;</span><span class="p">],</span>
    <span class="n">source</span> <span class="p">=</span><span class="o">&gt;</span> &quot;<span class="o">/</span><span class="n">vagrant</span><span class="o">/</span><span class="n">codebase_nginx</span>&quot;<span class="p">,</span>
<span class="p">}</span>
</pre></div>


<p>Run <code>vagrant reload</code> and you're done with the <code>nginx</code> configuration. Besides removing the repetitiveness for you, Puppet is also wonderful when you're working on a team or on an open-source project. Now, all you need to do is write the manifests and once you share them you can rest assured that the entire team has the exact same environment.<br />
</p>
	</article>

  <h3 class="date">October 14, 2011</h3>
    <article>
	<hgroup>
	<h2><a href="blog/2011/10/a-world-without-lego" title="Permalink to A world without LEGO">A world without LEGO</a></h2>
	
	</hgroup>
	<p>I just read this short but really thoughtful <a href="http://sahillavingia.com/blog/why-im-scared-of-the-post-pc-era/">blog post</a> by <a href="http://sahillavingia.com/">Sahil Lavingia</a> and couldn't agree with it more. A lot of the products we use today are products of the <a href="http://catb.org/~esr/faqs/hacker-howto.html">hacker mindset</a>- the personal computer, Facebook, Google. All these are here today because some guy or guys didn't just sit around waiting for some big company to make something they wanted but instead, went ahead and built what they had needed. In fact, they built it even when there were big companies building such things, just because they knew they could build a better product than those that already existed. And they built those things, despite the fact that they didn't have even a small fraction of the resources the large corporations had. And then, they built it and eventually even outgrew those very corporations. Yahoo Mail now has a <em>Sign in with Google</em> option!</p>
<p>Things like LEGO blocks teach us that we can go beyond being users to become builders. However, as more people "start their technology career with iPads" and their Internet careers with Facebook, the tech industry might lose the enthusiastic innovation and curiosity it is now filled with. </p>
<p>"But hopefully I am wrong." Well, I really hope he is.<br />
</p>
	</article>

  <h3 class="date">August 05, 2012</h3>
    <article>
	<hgroup>
	<h2><a href="blog/2012/08/an-ide-as-a-packaged-chrome-app" title="Permalink to An IDE as a packaged Chrome app">An IDE as a packaged Chrome app</a></h2>
	
	</hgroup>
	<p>Everyone is talking about how browsers are getting more powerful. With recent developments such as Google's V8 Javascript engine, web browsers are being viewed more and more as platforms and not as mere "document viewers" to the web. The Chromebook is probably the best example I can site of this paradigm shift.</p>
<p>Anyways as browsers become more powerful, attempts to create development environments based on browsers have also gotten more agressive. The most notable of these attempts is probably <a href="http://app.kodowa.com/playground">Light Table</a>, which is a really sleek IDE that runs on the browser. (Just to be accurate for Light Table, the actual "evaluation" of the code happens outside the browser)</p>
<p>Its first beta version that's called Light Table Playground was released a while back, and while the initial "pitch" had seemed really promising, <strong>I found that programming inside the browser was not something that I enjoyed doing</strong>. Well, I know that the guys working on Light Table are developing the tool as an in-browser tool. And I think an IDE that can talk to the Internet is the right way to go.</p>
<p>What I really want to see is an <strong>IDE that acts as first-class desktop app, but can still talk to the web</strong>, like most web apps. And yes, that would be something close to Chrome apps, but the Google Chrome team recently(it was about a month back) announced that Chrome apps are about to get an overhaul that is more along the lines of what I'm talking about:</p>
<iframe width="560" height="315" src="http://www.youtube.com/embed/lBUGTVIJVfM" frameborder="0" allowfullscreen></iframe>

<p>Having such an app would feel comfortable while still leveraging the power of the mighty "clouds". Since I already keep my <code>code/</code> folder inside Dropbox, I'd say that the app could take Dropbox as a "role model". The app would be available offline, but when its online it would start syncing to its servers so you can access your code anywhere.</p>
<p>Ideally, the app would be a one-click install which would set up your development environment exactly as you've configured. And of course, there's bonus points for modeling this around Vim :)</p>
	</article>

  <h3 class="date">June 23, 2012</h3>
    <article>
	<hgroup>
	<h2><a href="blog/2012/06/every-minute-of-the-day" title="Permalink to Every minute of the day...">Every minute of the day...</a></h2>
	
	</hgroup>
	<p>I found this totally neat infograph today on <a href="http://www.visualnews.com/2012/06/19/how-much-data-created-every-minute/?view=infographic">Visual News</a> and thought I'd share it with you guys. </p>
<p><a href="http://www.visualnews.com/2012/06/19/how-much-data-created-every-minute/?view=infographic"><img src="http://visualnews.columnfivemedia.netdna-cdn.com/wp-content/uploads/2012/06/DOMO-Data-in-One-Minute.jpg" style="width:675px; padding:10px;"/></a></p>
<p>Now, for a shameless plug: you might want to check out a web app I made a few weeks ago that helps you put into context how fast video is being added to Youtube- <a href="http://omgyoutube.herokuapp.com/">OMGYoutube</a>.</p>
	</article>

  <h3 class="date">August 21, 2012</h3>
    <article>
	<hgroup>
	<h2><a href="blog/2012/08/extracting-feed-articles-in-clojure" title="Permalink to Extracting feed articles in Clojure">Extracting feed articles in Clojure</a></h2>
	
	</hgroup>
	<p>I'm reading <a href="http://shop.oreilly.com/product/9780596529321.do"><strong>Programming Collective Intelligence</strong></a> by <a href="http://kiwitobes.com/"><strong>Toby Segaran</strong></a> and doing the examples in Clojure. <em>Chapter 3</em> in the book shows you how to cluster similar blogs together using word-frequencies generated from their feeds. </p>
<p>Now, some blogs annoyingly give out just a link to the post or just a short blurb of the post in their feeds. That proved to be a major annoyance but I found a workaround to deal with it, which I will describe in this post. </p>
<p><em>(By the way, if you have a blog that publishes just links or blurbs, please consider changing your feed settings; you'll make a lot of people reading your blog using a feed reader, and a few programmers a lot happier)</em></p>
<p>I used <a href="https://github.com/scsibug/feedparser-clj"><strong>feedparser-clj</strong></a> to parse feeds in order to grab the whole article from the feed, I used <a href="https://github.com/jiminoc/goose">Goose</a>, which is a Scala library. Because of this, you can't simply start using Goose by just adding it as a Leiningen dependency. Thankfully, there is a tool, <a href="https://github.com/kumarshantanu/lein-localrepo"><code>lein-localrepo</code></a> that greatly simplifies installing Leiningen or Maven repos from a local file(as opposed to from clojars.org). After installing localrepo, you need to install Goose:</p>
<div class="codehilite"><pre><span class="n">lein</span> <span class="n">localrepo</span> <span class="n">coords</span> <span class="o">&lt;</span><span class="n">path</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">jar</span><span class="o">-</span><span class="n">file</span><span class="o">&gt;</span>
</pre></div>


<p>Which will give you something like <code>goose/target/goose-2.1.19.jar goose/goose 2.1.19</code>. Now, to actually install it:</p>
<div class="codehilite"><pre><span class="n">lein</span> <span class="n">localrepo</span> <span class="n">install</span> <span class="n">goose</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">goose</span><span class="o">-</span>2<span class="p">.</span>1<span class="p">.</span>19<span class="p">.</span><span class="n">jar</span> <span class="n">goose</span><span class="o">/</span><span class="n">goose</span> 2<span class="p">.</span>1<span class="p">.</span>19
</pre></div>


<p>Then, add <code>[com.gravity/goose "2.1.19"]</code> to your project dependencies. Now, if you open a REPL in the project dir(using <code>lein repl</code>), you should be able to import stuff from Goose:</p>
<div class="codehilite"><pre><span class="nb">import </span><span class="p">(</span><span class="nf">com.gravity.goose</span> <span class="nv">Goose</span> <span class="nv">Configuration</span> <span class="nv">Article</span><span class="p">))</span>
</pre></div>


<p>To extract the article from a URL, type in a function:</p>
<div class="codehilite"><pre><span class="p">(</span><span class="kd">defn </span><span class="nv">extract-article</span>
<span class="s">&quot;Extracts the article from url.&quot;</span>
<span class="p">[</span><span class="nv">url</span><span class="p">]</span>
<span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">url</span>     <span class="nv">url</span>
    <span class="nv">goose</span>   <span class="p">(</span><span class="nf">Goose.</span> <span class="p">(</span><span class="nf">Configuration.</span><span class="p">))</span>
    <span class="nv">article</span> <span class="p">(</span><span class="nf">.extractContent</span> <span class="nv">goose</span> <span class="nv">url</span><span class="p">)]</span>
        <span class="p">(</span><span class="nf">.cleanedArticleText</span> <span class="nv">article</span><span class="p">)))</span>
</pre></div>


<p>Next, we will extract a list of blog post URLs:</p>
<div class="codehilite"><pre><span class="p">(</span><span class="nf">use</span> <span class="o">&#39;</span><span class="p">[</span><span class="nv">feedparser-clj</span> <span class="ss">:exclude</span> <span class="p">(</span><span class="nf">-main</span><span class="p">)])</span>

<span class="p">(</span><span class="kd">defn </span><span class="nv">articles-list</span>
<span class="p">[</span><span class="nv">feed-url</span><span class="p">]</span>
<span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">parsed</span> <span class="p">(</span><span class="nf">parse-feed</span> <span class="nv">feed-url</span><span class="p">)]</span>
    <span class="p">(</span><span class="nb">map </span><span class="ss">:link</span> <span class="p">(</span><span class="ss">:entries</span> <span class="nv">parsed</span><span class="p">))))</span>
</pre></div>


<p>Finally, to get all the extracted articles from a feed, you can map <code>extract-article</code> to a list of article URLs:</p>
<div class="codehilite"><pre><span class="p">(</span><span class="nb">map </span><span class="nv">extract-article</span> <span class="p">(</span><span class="nf">articles-list</span> <span class="s">&quot;http://samrat.me/feeds/all.xml&quot;</span><span class="p">))</span>
</pre></div>


<p>I hope that helped clear out or avoid at least some confusion. You can shoot out any queries or feedback to <a href="http://twitter.com/samratmansingh">@samratmansingh</a></p>
	</article>



<p class="paginator">
	
	
		<a href="http://samrat.me/author/Samrat Man Singh2.html" class="button_accent" style="float:right;">continue&nbsp;&nbsp;&nbsp;&rarr;</a>
	
</p>


</section>

<div class="mobile-nav">
  <span class="nav-btn" id="mobile-nav-btn">
    <span class="nav-btn-bar"></span>
    <span class="nav-btn-bar"></span>
    <span class="nav-btn-bar"></span>
  </span>
  <h3><a href="/">http://samrat.me</a></h3>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
/*<![CDATA[*/
var twitter_integration_enabled = true,
    github_integration_enabled = true,
    dribbble_integration_enabled = false,
    instagram_integration_enabled = true;
/*]]>*/
</script>

<script src="http://samrat.me/theme/js/min/scripts.min.js"></script>


    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-18986645-3']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>

</body>