<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="description" content="Personal website and blog of Samrat Man Singh. Follow him at @samratmansingh" />
  <meta name="keywords" content="Samrat Man Singh, python, flask, computers, technology, nepal" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Xtremepapers download script | Samrat Man Singh</title>
  <!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <link rel="stylesheet" href="http://samrat.me/theme/css/styles.min.css" type="text/css" media="screen, projection">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/SamratDotMe" />
  
</head>

<body>
<header class="main-header">
  <hgroup>
    <div class="picture">
      <a href="http://samrat.me" rel="home"></a>
    </div>
    <h1>Samrat Man Singh</h1>
    <h2>18 year-old from Nepal interested in computers and technology.</h2>
  </hgroup>
  <nav>
    <ul class="main-nav">
      <li><a href="http://samrat.me" id="home-link">Home</a></li>
	  
		<li><a href="http://twitter.com/samratmansingh" id="twitter-link">Twitter</a></li>
	  
		<li><a href="http://github.com/samrat" id="twitter-link">Github</a></li>
	  
	  <li><a href="http://feeds.feedburner.com/SamratDotMe" id="github-link">Feed</a></li>
      <li><a href="mailto:samratmansingh@gmail.com?subject=Hello" id="contact-link">Contact</a></li>
  </nav>
  <a href="http://pelican.notmyidea.org" class="fork-me">Powered by Pelican.</a>

</header>

<section class="main-section blog-section" id="blog-posts">
	<h3 class="date">July 28, 2012</h3>
  <article>
	<hgroup>
	
	<h2><a href="http://samrat.me/blog/2012/07/xtremepapers-download-script">Xtremepapers download script</a></h2>
	</hgroup>
	<p>Here's a Python script I wrote to download past papers from [Xtremepapers.net][1].
You'll need to have [BeautifulSoup 4][2] to use it. Just replace the value in the "url" and run it to have all the PDF files in "</p>
<div class="codehilite"><pre><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span> 
<span class="kn">import</span> <span class="nn">requests</span> 
<span class="kn">import</span> <span class="nn">urlparse</span>
<span class="kn">from</span> <span class="nn">urllib</span> <span class="kn">import</span> <span class="n">pathname2url</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&quot;http://www.xtremepapers.com/CIE/index.php?dir=International%20A%20And%20AS</span><span class="si">%20Le</span><span class="s">vel/9231%20-</span><span class="si">%20F</span><span class="s">urther%20Mathematics/&quot;</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">construct_filename</span><span class="p">(</span><span class="n">file_url</span><span class="p">):</span>
    <span class="n">q</span> <span class="o">=</span> <span class="n">urlparse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="n">file_url</span><span class="p">)</span><span class="o">.</span><span class="n">query</span>
    <span class="n">q_parsed</span> <span class="o">=</span> <span class="n">urlparse</span><span class="o">.</span><span class="n">parse_qs</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
    <span class="n">download_link</span> <span class="o">=</span> <span class="s">&#39;http://www.xtremepapers.com/CIE/&#39;</span> <span class="o">+</span> <span class="n">pathname2url</span><span class="p">(</span><span class="n">q_parsed</span><span class="p">[</span><span class="s">&#39;dir&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span> <span class="n">q_parsed</span><span class="p">[</span><span class="s">&#39;file&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
    <span class="c">#print download_link</span>
    <span class="k">return</span> <span class="n">download_link</span>

<span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;autoindex_a&#39;</span><span class="p">}):</span>
    <span class="k">if</span> <span class="n">link</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;href&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">3</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">link</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;href&#39;</span><span class="p">))]</span> <span class="o">==</span> <span class="s">&#39;pdf&#39;</span><span class="p">:</span>
        <span class="n">file_url</span><span class="o">=</span> <span class="s">&#39;http://www.xtremepapers.com/&#39;</span> <span class="o">+</span> <span class="n">link</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;href&#39;</span><span class="p">)</span>
        <span class="n">construct_filename</span><span class="p">(</span><span class="n">file_url</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s">&#39;wget &#39;</span> <span class="o">+</span> <span class="n">construct_filename</span><span class="p">(</span><span class="n">file_url</span><span class="p">)</span> <span class="p">)</span>
</pre></div>

	<p>
	If you liked this post, you should <a href="http://twitter.com/samratmansingh">follow me on Twitter.</a>
	</p>
	
<a href="https://twitter.com/share" class="twitter-share-button" data-via="samratmansingh" data-size="large" data-count="none">Tweet</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

	<br/><br/>		
	<footer>

	


	

	<br/>

	 <a href="/" class="button_accent">&larr;&nbsp;&nbsp;&nbsp;back to blog</a>

	</footer>
	</article>
</section>



<div class="mobile-nav">
  <span class="nav-btn" id="mobile-nav-btn">
    <span class="nav-btn-bar"></span>
    <span class="nav-btn-bar"></span>
    <span class="nav-btn-bar"></span>
  </span>
  <h3><a href="/">samrat.me</a></h3>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
/*<![CDATA[*/
var twitter_integration_enabled = true,
    github_integration_enabled = true,
    dribbble_integration_enabled = false,
    instagram_integration_enabled = true;
/*]]>*/
</script>

<script src="http://samrat.me/theme/js/min/scripts.min.js"></script>


    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-18986645-3");
    pageTracker._trackPageview();
    } catch(err) {}</script>

</body>