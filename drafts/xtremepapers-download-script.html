<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

        <!-- Basic Page Needs
  ================================================== -->
        <meta charset="utf-8">
        <title>Xtremepapers download script | Samrat Man Singh</title>
        <meta name="description" content="Personal weblog/site of
                                          Samrat Man Singh">
        <meta name="author" content="Samrat Man Singh">

        <!--[if lt IE 9]>
                <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

        <!-- Mobile Specific Metas
  ================================================== -->
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

        <!-- CSS
  ================================================== -->
        <link rel="stylesheet" href="/theme/stylesheets/base.css">
        <link rel="stylesheet" href="/theme/stylesheets/skeleton.css">
        <link rel="stylesheet" href="/theme/stylesheets/layout.css">
        <link rel="stylesheet" href="documentation-assets/docs.css">

        <!-- Favicon
        ================================================== -->
        <link rel="shortcut icon" href="/favicon.ico">
        <link rel="apple-touch-icon" sizes="57x57" href="src/images/apple-touch-icon.png">
        <link rel="apple-touch-icon" sizes="72x72" href="src/images/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="114x114" href="src/images/apple-touch-icon-114x114.png">

</head>
  <body>
    <div class="container">
      <hr id="page-top"/>
      <header>
        <a href="http://samrat.me">
          <h1 class="site-title">Samrat Man Singh</h1></a>
        18-year old from Nepal interested in computers and technology.
      </header>
      <div id="nav">
        <ul>
          <li><a href="http://samrat.me">Home</a></li>
          <li><a href="http://github.com/samrat">Github</a></li>
          <li><a href="http://twitter.com/samratmansingh">Twitter</a></li>
          <li><a href="mailto:samrat@samrat.me">Email</a></li>
          <li><a href="http://samrat.me/feeds/all.xml">Feed</a>
          </li>
        </ul>
      </div>
      <hr class = "large"/>
    </div>

    <div class="container">

        <section id="content">
          
<div class="sixteen columns">
        <h3 class="entry-title"><a href="blog/2012/10/xtremepapers-download-script" title="Permalink to Xtremepapers download script">Xtremepapers download script</a></h3>

        <div id="tweet"><a href="https://twitter.com/share" class="twitter-share-button" data-related="samratmansingh" data-count="none">Tweet</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></div>
        <div id="entrymeta">October 16, 2012</div>

  <br/>
        <div class="entry-content">
          <p>Here's a Python script I wrote to download past papers from [Xtremepapers.net][1].
You'll need to have [BeautifulSoup 4][2] to use it. Just replace the value in the "url" and run it to have all the PDF files in "</p>
<div class="codehilite"><pre><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span> 
<span class="kn">import</span> <span class="nn">requests</span> 
<span class="kn">import</span> <span class="nn">urlparse</span>
<span class="kn">from</span> <span class="nn">urllib</span> <span class="kn">import</span> <span class="n">pathname2url</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&quot;http://www.xtremepapers.com/CIE/index.php?dir=International%20A%20And%20AS</span><span class="si">%20Le</span><span class="s">vel/9231%20-</span><span class="si">%20F</span><span class="s">urther%20Mathematics/&quot;</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>

<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">construct_filename</span><span class="p">(</span><span class="n">file_url</span><span class="p">):</span>
    <span class="n">q</span> <span class="o">=</span> <span class="n">urlparse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="n">file_url</span><span class="p">)</span><span class="o">.</span><span class="n">query</span>
    <span class="n">q_parsed</span> <span class="o">=</span> <span class="n">urlparse</span><span class="o">.</span><span class="n">parse_qs</span><span class="p">(</span><span class="n">q</span><span class="p">)</span>
    <span class="n">download_link</span> <span class="o">=</span> <span class="s">&#39;http://www.xtremepapers.com/CIE/&#39;</span> <span class="o">+</span> <span class="n">pathname2url</span><span class="p">(</span><span class="n">q_parsed</span><span class="p">[</span><span class="s">&#39;dir&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span> <span class="n">q_parsed</span><span class="p">[</span><span class="s">&#39;file&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
    <span class="c">#print download_link</span>
    <span class="k">return</span> <span class="n">download_link</span>

<span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span><span class="s">&#39;autoindex_a&#39;</span><span class="p">}):</span>
    <span class="k">if</span> <span class="n">link</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;href&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">3</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="n">link</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;href&#39;</span><span class="p">))]</span> <span class="o">==</span> <span class="s">&#39;pdf&#39;</span><span class="p">:</span>
        <span class="n">file_url</span><span class="o">=</span> <span class="s">&#39;http://www.xtremepapers.com/&#39;</span> <span class="o">+</span> <span class="n">link</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;href&#39;</span><span class="p">)</span>
        <span class="n">construct_filename</span><span class="p">(</span><span class="n">file_url</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s">&#39;wget &#39;</span> <span class="o">+</span> <span class="n">construct_filename</span><span class="p">(</span><span class="n">file_url</span><span class="p">)</span> <span class="p">)</span>
</pre></div>

          <p id="footer-message">If you liked this post, you should <a href='http://twitter.com/samratmansingh'>follow me on Twitter</a> or <a href='http://samrat.me/feeds/all.xml'>subscribe to this blog</a>.</p>

          <a id="displayText" href= "blog/2012/10/xtremepapers-download-script#disqus_thread"
          onclick="javascript:toggle();" style="text-align:center;">Leave a Comment</a>
          <div id="toggleDiv" style="display: none">        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'samratmansingh'; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>

          <!--  -->

          <div><a href="http://samrat.me">‚Üê Back to Home</a></div>
          <br/>
          </div>
        </div>

<script language="javascript"> 
function toggle() {
    var ele = document.getElementById("toggleDiv");
    var text = document.getElementById("displayText");
    if(ele.style.display == "block") {
            ele.style.display = "none";
        text.innerHTML = "show";
    }
    else {
        ele.style.display = "block";
        text.innerHTML = "";
    }
} 
</script>

<!-- Disqus -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'samratmansingh'; // required: replace example with your forum shortname

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function () {
  var s = document.createElement('script'); s.async = true;
  s.type = 'text/javascript';
  s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>
        

        </section>
   <hr />
    </div>

<!-- Google Analytics -->
    
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-18986645-3']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>

</body>