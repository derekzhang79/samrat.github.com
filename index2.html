<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="description" content="Personal website and blog of Samrat Man Singh. Follow him at @samratmansingh" />
  <meta name="keywords" content="Samrat Man Singh, python, flask, computers, technology, nepal" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Samrat Man Singh</title>
  <!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <link rel="stylesheet" href="http://samrat.me/theme/css/styles.min.css" type="text/css" media="screen, projection">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/SamratDotMe" />
  
</head>

<body>
<header class="main-header">
  <hgroup>
    <div class="picture">
      <a href="http://samrat.me" rel="home"></a>
    </div>
    <h1>Samrat Man Singh</h1>
    <h2>18 year-old from Nepal interested in computers and technology.</h2>
  </hgroup>
  <nav>
    <ul class="main-nav">
      <li><a href="http://samrat.me" id="home-link">Home</a></li>
	  
		<li><a href="http://twitter.com/samratmansingh" id="twitter-link">Twitter</a></li>
	  
		<li><a href="http://github.com/samrat" id="twitter-link">Github</a></li>
	  
	  <li><a href="http://feeds.feedburner.com/SamratDotMe" id="github-link">Feed</a></li>
      <li><a href="mailto:samratmansingh@gmail.com?subject=Hello" id="contact-link">Contact</a></li>
  </nav>
  <a href="http://pelican.notmyidea.org" class="fork-me">Powered by Pelican.</a>

</header>

<section class="main-section blog-section" id="blog-posts">
  
  <h3 class="date">May 27, 2012</h3>
    <article>
	<hgroup>
	<h2><a href="blog/2012/05/flask-nginx-gunicornon-a-vagrant-box" title="Permalink to Flask + Nginx + Gunicorn(on a Vagrant box)">Flask + Nginx + Gunicorn(on a Vagrant box)</a></h2>
	
	</hgroup>
	<p><strong>Update-</strong> <em>Since I(and many others on Hacker News) felt that I missed up on an important tool closely related to, and tightly embraced by Vagrant, I've written a follow-up to this post which covers Puppet- you can <a href="http://samrat.github.com/blog/2012/06/a-first-look-at-provisioning-with-puppeton-a-vagrant-box.html">find it here</a>.</em></p>
<p>I had some difficulty in grasping how exactly to set up a server when I tried to do so recently, so I decided to write a tutorial that will guide you through the process. Hopefully, this post will help you avoid at least some of the confusion that I encountered.</p>
<p>We'll be using Nginx + Gunicorn to host a simple Flask app. Many of you may not have access to a server but don't worry, we'll use <a href="http://vagrantup.com">Vagrant</a>, which makes use of a VirtualBox VM to emulate a server. </p>
<h2>The Flask App</h2>
<p>Because this is a post about deployment more than development, we'll make the web app super-simple. If you're not familiar with Flask, please <a href="http://flask.pocoo.org/">check it out</a>, its awesome and really easy to learn. You'll also probably want to develop the app inside <a href="http://pypi.python.org/pypi/virtualenv">virtualenv</a>- it makes things a lot neater. Make a folder in your local machine(we're not working with the virtual-machine yet) for your app, I'll call it <code>codebase</code>. Create two folders called <code>static</code> and <code>templates</code>, and a Python file called <code>app.py</code>. <code>codebase</code> should now look like this:</p>
<div class="codehilite"><pre><span class="p">.</span>
├── <span class="n">app</span><span class="p">.</span><span class="n">py</span>
├── <span class="n">static</span>
└── <span class="n">templates</span>
</pre></div>


<p>Now, open app.py with a text editor and add the following:</p>
<div class="codehilite"><pre><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s">&quot;Hello world!&quot;</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>


<p>At this point, if you run <code>app.py</code> with <code>python app.py</code>, you should be able to open http://localhost:5000/ and see a "Hello World!" printed. Now, freeze your requirements with </p>
<div class="codehilite"><pre><span class="n">pip</span> <span class="n">freeze</span> <span class="o">&gt;</span> <span class="n">requirements</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<p>Great, now we'll start working on the actual server. </p>
<h2>Vagrant</h2>
<p>As I said before, Vagrant allows you to work with server-like environments on your local machine. It's absolutely great. To get <a href="http://vagrantup.com">Vagrant</a> up and running:</p>
<div class="codehilite"><pre><span class="c"># first install Virtualbox, then,</span>
<span class="n">gem</span> <span class="n">install</span> <span class="n">vagrant</span>
<span class="n">vagrant</span> <span class="nb">box</span> <span class="n">add</span> <span class="n">base</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">files</span><span class="p">.</span><span class="n">vagrantup</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">precise32</span><span class="p">.</span><span class="nb">box</span>
<span class="n">vagrant</span> <span class="n">init</span>
<span class="n">vagrant</span> <span class="n">up</span>
</pre></div>


<p>If nothing went wrong, you should now see a file called <code>Vagrantfile</code> inside <code>codebase</code>- that's Vagrant's configuration file. Open the file, we'll need to make a few changes to the file.</p>
<p>First, uncomment the line:</p>
<div class="codehilite"><pre><span class="n">config</span><span class="p">.</span><span class="n">vm</span><span class="p">.</span><span class="n">network</span> <span class="p">:</span><span class="n">hostonly</span><span class="p">,</span> &quot;192<span class="p">.</span>168<span class="p">.</span>33<span class="p">.</span>10&quot;
</pre></div>


<p>and change "192.168.33.10" to "33.33.33.33". This will enable the host-machine(that is your computer) to access the webserver running on the VM.</p>
<p>That way we should be able to access a web app running in the VM's <code>localhost</code>, on our machine. </p>
<p>Because, we did a <code>vagrant up</code> the Vagrant box should already be running. Now, run </p>
<div class="codehilite"><pre><span class="n">vagrant</span> <span class="n">reload</span>
</pre></div>


<p>so that the changes we made to the Vagrantfile take place.</p>
<p>After the VM restarts, run</p>
<div class="codehilite"><pre><span class="n">vagrant</span> <span class="n">ssh</span>
</pre></div>


<p>This allows you to run commands into the VM. Once inside the VM, we'll need to get some things installed. Run </p>
<div class="codehilite"><pre><span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">nginx</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">virtualenv</span>
</pre></div>


<p>Now let's create a folder inside the VM where we'll keep the application</p>
<div class="codehilite"><pre><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">vagrant</span>
<span class="n">mkdir</span> <span class="n">www</span>
<span class="n">cd</span> <span class="n">www</span>
<span class="n">virtualenv</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span> <span class="p">.</span>
<span class="n">mkdir</span> <span class="n">codebase</span>
</pre></div>


<p>And let's grab the application from our local machine</p>
<div class="codehilite"><pre><span class="n">cp</span> <span class="o">/</span><span class="n">vagrant</span><span class="o">/*</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">vagrant</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">codebase</span><span class="o">/</span>
</pre></div>


<p><em>Note that while I used <code>cp</code>, its always a better idea to use <code>git</code> or some other version-control system. For more on that, I recommend that you read <a href="http://thomas.pelletier.im/2011/04/git-django-deployment/">this post</a>.</em></p>
<p>Then, activate the virtualenv we created.</p>
<div class="codehilite"><pre><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">vagrant</span><span class="o">/</span><span class="n">www</span>
<span class="n">source</span> <span class="n">bin</span><span class="o">/</span><span class="n">activate</span>
</pre></div>


<p>Install gunicorn with <code>pip</code></p>
<div class="codehilite"><pre><span class="n">pip</span> <span class="n">install</span> <span class="n">gunicorn</span>
</pre></div>


<p>Also install the other Python dependencies your app has with</p>
<div class="codehilite"><pre><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<p>That will grab and install your app's required dependencies like Flask. </p>
<p>Now, if you run </p>
<div class="codehilite"><pre><span class="n">gunicorn</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">vagrant</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">codebase</span><span class="o">/</span><span class="n">app</span><span class="p">.</span><span class="n">py</span><span class="p">:</span><span class="n">app</span> <span class="o">-</span><span class="n">b</span> 127<span class="p">.</span>0<span class="p">.</span>0<span class="p">.</span>1<span class="p">:</span>8000
</pre></div>


<p>you'll have your app running but if you try opening it from your browser you'll find that you can't actually see the "Hello World" message that we were expecting. That's where nginx comes in.</p>
<h2>Nginx</h2>
<p>First of all, you need to start nginx with</p>
<div class="codehilite"><pre><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">init</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">nginx</span> <span class="n">start</span>
</pre></div>


<p>Then </p>
<div class="codehilite"><pre><span class="n">rm</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">sites</span><span class="o">-</span><span class="n">enabled</span><span class="o">/</span><span class="n">default</span>
<span class="n">touch</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">sites</span><span class="o">-</span><span class="n">available</span><span class="o">/</span><span class="n">codebase</span>
<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">sites</span><span class="o">-</span><span class="n">available</span><span class="o">/</span><span class="n">codebase</span>  <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">nginx</span><span class="o">/</span><span class="n">sites</span><span class="o">-</span><span class="n">enabled</span><span class="o">/</span><span class="n">codebase</span>
</pre></div>


<p>To <code>/etc/nginx/sites-enabled/codebase</code> add</p>
<div class="codehilite"><pre><span class="n">server</span> <span class="p">{</span>
    <span class="n">location</span> <span class="o">/</span> <span class="p">{</span>
        <span class="n">proxy_pass</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span>127<span class="p">.</span>0<span class="p">.</span>0<span class="p">.</span>1<span class="p">:</span>8000<span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>And restart nginx with </p>
<div class="codehilite"><pre><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">init</span><span class="p">.</span><span class="n">d</span><span class="o">/</span><span class="n">nginx</span> <span class="n">restart</span>
</pre></div>


<p>Now, from inside <code>codebase</code> run</p>
<div class="codehilite"><pre><span class="n">gunicorn</span> <span class="n">app</span><span class="p">:</span><span class="n">app</span> <span class="o">-</span><span class="n">b</span> <span class="n">localhost</span><span class="p">:</span>8000
</pre></div>


<p>If everything went right, if you visit <a href="http://33.33.33.33/">http://33.33.33.33/</a> you should now see the "Hello World!" message. Congratulations! You've successfully set up your own server.</p>
	</article>

  <h3 class="date">May 03, 2012</h3>
    <article>
	<hgroup>
	<h2><a href="blog/2012/05/how-to-convert-a-bookmarklet-into-a-chrome-extension" title="Permalink to How to convert a bookmarklet into a Chrome extension">How to convert a bookmarklet into a Chrome extension</a></h2>
	
	</hgroup>
	<p>I've been playing around with CoffeeScript lately and discovered a neat little tool that converts any JavaScript(and thus, Coffeescript) bookmarklet into a Chrome extension- <a href="http://sandbox.self.li/bookmarklet-to-extension/">check it out</a>.</p>
	</article>

  <h3 class="date">May 03, 2012</h3>
    <article>
	<hgroup>
	<h2><a href="blog/2012/05/would-you-want-to-be-on-svbtle" title="Permalink to Would you want to be on Svbtle?">Would you want to be on Svbtle?</a></h2>
	
	</hgroup>
	<p>When I first saw the Hacker News <a href="http://news.ycombinator.com/item?id=3742314">post</a> about <a href="http://svbtle.com/">Svbtle</a>, I opened it. Svbtle looked interesting, maybe something I'd want to use but then came the part about it being only for a small number of "vetted bloggers" and like so many others I was dissapointed. The design looked so good, it was a shame I couldn't use it. </p>
<p>Soon, <em>the debate</em> had already started. As I said, I wasn't the only one dissapointed that it was a closed system- everyone seemed to be complaining, but <a href="http://news.ycombinator.com/item?id=3744237">someone else</a> had gone a step ahead and built something similar called <a href="http://natewienert.com/codename-obtvse">Obtvse</a> and released its code. Svbtle became the <strong>hot story</strong> on Hacker News; even TechCrunch ran a <a href="http://techcrunch.com/2012/03/24/forget-todays-drama-dustin-curtis-svbtle-is-trying-to-push-blogging-forward/">piece on it</a>. </p>
<p>So, how has things changed since I first read Dustin Curtis' post about Suvbtle? Well, now I don't really want to be on it. It's just gotten too much publicity and now the guys who are already in, the <em>vetted bloggers</em> who were <em>witty and intelligent</em> enough to get invited, kind of look like the bad guys. Regardless of how awesome the design is(yeah, I still the think the design is really neat), right now I think having the Svbtle brand name on my site is not something I'd want.</p>
<p>What do you guys think? Would you want to be on Svbtle?</p>
	</article>

  <h3 class="date">March 20, 2012</h3>
    <article>
	<hgroup>
	<h2><a href="blog/2012/03/the-internet-first-impressions" title="Permalink to The Internet- First Impressions">The Internet- First Impressions</a></h2>
	
	</hgroup>
	<p>True, the Internet has changed the way we do business, the way we access information and the way we communicate. It is a revolutionary tool, which has probably already secured a place in the history books of the future. Lately, however, the way we use the Internet has changed too. My earliest memories of the Internet is how I used to throw questions at the butler from AskJeeves.com. For those unfamiliar with it, AskJeeves(which is now Ask.com). was a search engine similar to Google.</p>
<p>That was my introduction to the Internet: it was a butler who would try to satisfy my curiosities. However as I see it, things are changing. If I were to guess, I’d say that most people who start using the Internet these days start from social networking sites like Facebook. Now, I’ve got nothing against Facebook or social networking tools but I just don’t think that a person’s first impression of the Internet should be that it was built to emulate real-world society. Nor should kids be limited to a walled site that gives them a very limited perspective of the Internet. The internet is so much more than that. It’s so much more than what, in my opinion, most people perceive it to be. And I believe that everyone should know and make use of the endless opportunities it creates.</p>
<p>The way people are being introduced to the internet may also be damaging to the whole ethos of the internet itself. For instance, someone with the impression that the purpose for building the Internet was to network socially will probably never make a significant contribution to the knowledge base of the internet. Furthermore, I think that these are the people who go around making stupid comments which don’t add any value to the conversation.</p>
<p>The number of internet users is growing rapidly but do we want these people to stay limited to the walled gardens of Facebook or so many other sites which are pretty fun to hang out but limit its users off what is a gigantuan amount of knowledge? I think that we really need to rethink the way that we are introducing people to the internet. That is absolutely necessary if we are to keep the resourcefulness of the internet sustainable.</p>
	</article>

  <h3 class="date">October 29, 2011</h3>
    <article>
	<hgroup>
	<h2><a href="blog/2011/10/the-intersection-between-biology-and-technology" title="Permalink to The intersection between biology and technology">The intersection between biology and technology</a></h2>
	
	</hgroup>
	<p>Towards the end of <a href="http://www.amazon.com/gp/product/1451648537/ref=as_li_ss_tl?ie=UTF8&amp;tag=samrat09-20&amp;linkCode=as2&amp;camp=217145&amp;creative=399373&amp;creativeASIN=1451648537">'Steve Jobs' by Walter Isaacson</a>(the Steve Jobs bio), there's a quote by Steve Jobs that says something along the line of "The greatest advancements we will see in the twenty-first century will come from the <em>intersection of biology and technology</em>." Since this comes from a visionary who foresaw and made possible so many of today's great technologies and products, this statement is particularly hard to ignore. </p>
<p>So I began to wonder what these advancements would be like. Well, I got all sorts of ideas of what kind of innovations we could be expecting- nanobots fighting cancer cells, cyborgs(or maybe just enhanced human bodies), longer lifetimes, and lots of other fancy ideas. But, pretty soon I began wondering how much of these innovations would come from hackers. Many of the digital age's greatest innovations came from hackers working in their parents garage, so will we see any innovations in this era of "the intersection of biology and technology" coming from teenagers working on their own? Or will almost all of these innovations come from high-tech research labs?</p>
<p>Hackers in the digital age innovated by tinkering. <a href="http://en.wikipedia.org/wiki/Steve_Wozniak">Steve Wozniak</a> practically taught himself to build computers. A really large portion of programmers are self taught. But, will we see guys who taught themselves to, say, sequence the DNA? Or someone who created nanobots that could enter our blood streams and fight diseases? Tinkering with electronics or software requires easily available resources like electronics components or just a computer. If you want to start tinkering with biotech, however, you'll arguably require much sophisticated devices. Also, security issues like bioterrorism arise when anyone can have access to these resources. </p>
<p>Biology-hackers will probably have a much harder time getting the resources they need than the computer hackers did, but even if they did get the resources, the products or research they come up with is unlikely to become something really big. Because for one thing, no one would really trust products coming from college dropouts hacking in a garage enough to have have anything to do with their bodies. </p>
<p>So, we probably won't see much direct contribution from hackers in this field. That is a really sad thing, given that they played such a huge role in the digital revolution. But who knows, maybe something will come along that will change this, somehting like the <a href="http://en.wikipedia.org/wiki/Altair_8800">Altair 8800</a> for the PC revolution. </p>
	</article>



<p class="paginator">
	
		
			<a href="http://samrat.me/index.html" class="button_accent">&larr;&nbsp;&nbsp;&nbsp;newer</a>
		
	
	
		<a href="http://samrat.me/index3.html" class="button_accent" style="float:right;">continue&nbsp;&nbsp;&nbsp;&rarr;</a>
	
</p>


</section>

<div class="mobile-nav">
  <span class="nav-btn" id="mobile-nav-btn">
    <span class="nav-btn-bar"></span>
    <span class="nav-btn-bar"></span>
    <span class="nav-btn-bar"></span>
  </span>
  <h3><a href="/">samrat.me</a></h3>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
/*<![CDATA[*/
var twitter_integration_enabled = true,
    github_integration_enabled = true,
    dribbble_integration_enabled = false,
    instagram_integration_enabled = true;
/*]]>*/
</script>

<script src="http://samrat.me/theme/js/min/scripts.min.js"></script>


    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-18986645-3']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>

</body>